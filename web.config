<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>

    <!-- Redirect all traffic to server.js (main file) -->

		<rewrite>
  		<rules>
    		<rule name="Node.js" stopProcessing="true">
      		<match url=".*" />
      		<conditions logicalGrouping="MatchAll">
        		<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        		<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      		</conditions>
      		<action type="Rewrite" url="/" />
    		</rule>
  		</rules>
		</rewrite>


    <!-- MIME types for serving static assets -->
    <staticContent>
      <mimeMap fileExtension=".json" mimeType="application/json" />
      <mimeMap fileExtension=".js" mimeType="application/javascript" />
      <mimeMap fileExtension=".css" mimeType="text/css" />
      <mimeMap fileExtension=".html" mimeType="text/html" />
      <mimeMap fileExtension=".jpg" mimeType="image/jpeg" />
      <mimeMap fileExtension=".jpeg" mimeType="image/jpeg" />
      <mimeMap fileExtension=".png" mimeType="image/png" />
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    </staticContent>

    <!-- Enable WebSockets support -->
    <webSocket enabled="true" />

    <!-- Set default documents (optional) -->
    <defaultDocument>
      <files>
        <add value="index.html" />
        <add value="default.html" />
      </files>
    </defaultDocument>

  </system.webServer>
</configuration>
